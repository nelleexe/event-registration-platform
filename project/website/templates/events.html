{% extends "base.html" %}

{% load static %}
{% load event_filters %}

{% block content %}
{% if not events %}
<h2 class="message">Сейчас, к сожалению, нет информации о мероприятиях</h2>
{% else %}
<section id="events">
    {% for event in events %}
    <article id='event-{{ event.id }}' class="event">
        <img src="/media/{{ event.logo }}" alt="">
        <h2>{{ event.name }}</h2>
    </article>
    <article id='event-{{ event.id }}-more-info'> 
        <h2>{{ event.name }}</h2>
        <p>{{ event.description }}</p>
        <p>Участников: {{ event|get_members_count }} из {{ event.capacity }}</p>
        <form method="post">
            {% csrf_token %}
            <input type="hidden" name="event-id" value="{{ event.id }}">
            <button type="submit">Записаться</button>
        </form>
    </article>
    {% endfor %}
</section>
{% endif %}
{% endblock %}